{"version":3,"file":"mapping-row-reversed.js","sources":["../../../src/components/form/mapping-row-reversed/MappingRowReversed.tsx"],"sourcesContent":["import React from \"react\";\nimport {MappingRowReversedProps} from \"./MappingRowReversed.types\";\nimport { v4 as uuidv4 } from 'uuid';\nimport {MappingOption} from \"../../../models/mapping/Mapping.types\";\nimport Select from \"../select/Select\";\nimport { SelectOption, GroupOption } from \"../select/Select.types\";\nimport \"./MappingRowReversed.css\";\nimport {CircleTrash, Grab} from \"../../graphics\";\nimport Input from \"../input/Input\";\nimport Paragraph from \"../../content/paragraph/Paragraph\";\nimport FormRow from \"../form-row/FormRow\";\n\n/**\n * MappingRowReversed <br />\n * Manage mapping from WordPress fields to Airtable ones <br />\n * Use a template to auto Airtable field option\n *\n * @param {MappingRowReversedTexts} texts Texts\n * @param {number} index Row index.\n * @param {string} airtableFieldId Airtable field id\n * @param {string} wordPressFieldId WordPress field id\n * @param {FieldOptions} fieldOptions Field's options\n * @param {React.ReactNode} error Error\n * @param {MappingManagerReversed} mappingManager Mapping manager\n * @param {string} className Class name\n * @param {object} ...props Other props for <tr> HTML element.\n * @constructor\n */\nexport default function MappingRowReversed({ texts, index, airtableFieldId, wordPressFieldId, fieldOptions, error, mappingManager, className = '', ...props }:MappingRowReversedProps) {\n\n\tconst airtableFieldDisabled = Object.keys(mappingManager.airtableSelectFieldGroupsOptions).length === 0; // || loadingDatabasesAndPages;\n\tlet wordPressFieldConfig = {} as MappingOption;\n\tif (wordPressFieldId) {\n\t\twordPressFieldConfig = mappingManager.getWordPressFieldById(wordPressFieldId) ?? {};\n\t}\n\tconst airtableFieldChangedHandler = (newValue:{ value: string, label: string }) => {\n\t\tmappingManager.updateAirtableField(index, newValue ? newValue.value : '')\n\t};\n\n\tconst wordPressFieldChangedHandler = (newValue:{ value: string, label: string }) => {\n\t\tmappingManager.updateWordPressField(index, newValue ? newValue.value : '');\n\t};\n\n\tconst customFieldOptionChangedHandler = (e: React.FormEvent<HTMLInputElement>) => {\n\t\tconst target = e?.target as HTMLInputElement;\n\t\tmappingManager.updateFieldOption(index, 'name', target.value);\n\t};\n\n\tconst removeMappingRowHandler = () => {\n\t\tmappingManager.removeMappingRow(index)\n\t};\n\n\tlet selectedWordPressOption:string|SelectOption = '';\n\tconst wordPressOptions = Object.keys(mappingManager.wordPressSelectFieldsOptions).map((groupKey) => {\n\t\tconst group = mappingManager.wordPressSelectFieldsOptions[groupKey];\n\t\treturn {\n\t\t\tlabel: group.label,\n\t\t\toptions: group.options.map(({ value, label, enabled }) => {\n\t\t\t\tconst option:SelectOption = { value, label, isDisabled: !enabled };\n\t\t\t\tif (wordPressFieldId === option.value) {\n\t\t\t\t\tselectedWordPressOption = option;\n\t\t\t\t}\n\t\t\t\treturn option;\n\t\t\t})\n\t\t} as GroupOption;\n\t});\n\n\tlet selectedAirtableField:string|SelectOption = '';\n\tconst airtableOptions = Object.keys(mappingManager.airtableSelectFieldGroupsOptions[index]).map((groupKey) => {\n\t\tconst group = mappingManager.airtableSelectFieldGroupsOptions[index][groupKey];\n\t\tconst groupLabel = group.label ?? texts.fields;\n\t\treturn {\n\t\t\tlabel: groupLabel,\n\t\t\toptions: group.options.map((field) => {\n\t\t\t\tconst option = { value: field.id, label: field.name } as SelectOption;\n\t\t\t\tif (option.value === airtableFieldId) {\n\t\t\t\t\tselectedAirtableField = option\n\t\t\t\t}\n\t\t\t\treturn option;\n\t\t\t})\n\t\t} as GroupOption;\n\t})\n\n\tconst renderCustomFieldOptions = () => {\n\t\treturn <FormRow className=\"airwpsync-c-mapping-row-reversed__custom-field\">\n\t\t\t<Input\n\t\t\t\tlabel={ texts.custom_field }\n\t\t\t\tlabelHidden={ true }\n\t\t\t\tplaceholder={ texts.custom_field }\n\t\t\t\tvalue={ fieldOptions.name ?? '' }\n\t\t\t\tonChange={ customFieldOptionChangedHandler }\n\t\t\t/>\n\t\t</FormRow>;\n\t};\n\n\treturn <tr className={`airwpsync-c-mapping-row-reversed ${className}`} {...props}>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__wordpress-field-col\">\n\t\t\t<div className=\"airwpsync-c-mapping-row-reversed__wordpress-field\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"airwpsync-c-mapping-row-reversed__btn-sort airwpsync-u-reset-btn\"\n\t\t\t\t>\n\t\t\t\t\t<span className=\"screen-reader-text\">{texts.sort}</span>\n\t\t\t\t\t<Grab/>\n\t\t\t\t</div>\n\t\t\t\t<Select\n\t\t\t\t\tlabel={texts.wordpress_field_placeholder}\n\t\t\t\t\tlabelHidden={true}\n\t\t\t\t\tvalue={selectedWordPressOption}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tonChange={wordPressFieldChangedHandler}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\toptions={wordPressOptions}\n\t\t\t\t\tplaceholder={texts.wordpress_field_placeholder}\n\t\t\t\t/>\n\t\t\t\t{wordPressFieldConfig.notice ? <small>{wordPressFieldConfig.notice}</small> : null}\n\t\t\t\t{wordPressFieldId && wordPressFieldId.split('::')[1] === 'custom_field' ? renderCustomFieldOptions() : null}\n\t\t\t</div>\n\t\t</td>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__assigned-to\">\n\t\t\t{texts.assigned_to}\n\t\t</td>\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__airtable-field-col\">\n\t\t\t{ /* @TODO: check airtableFieldDisabled */ }\n\t\t\t<Select\n\t\t\t\tlabel={''}\n\t\t\t\tvalue={ selectedAirtableField }\n\t\t\t\t// @ts-ignore\n\t\t\t\tonChange={ airtableFieldChangedHandler }\n\t\t\t\t// @ts-ignore\n\t\t\t\toptions={ airtableOptions }\n\t\t\t\t/>\n\t\t\t{error ? <div className=\"airwpsync-c-mapping-row-reversed__error\">{ error }</div> : null }\n\t\t</td>\n\n\t\t<td className=\"airwpsync-c-mapping-row-reversed__flex\">\n\n\t\t\t<button\n\t\t\t\tclassName=\"airwpsync-c-mapping-row-reversed__remove-btn airwpsync-u-reset-btn\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={removeMappingRowHandler}\n\t\t\t>\n\t\t\t\t<span className=\"screen-reader-text\">{texts.remove}</span>\n\t\t\t\t<CircleTrash />\n\t\t\t</button>\n\t\t</td>\n\t</tr>;\n}\n"],"names":["_jsx","_jsxs","Grab","CircleTrash"],"mappings":"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"}